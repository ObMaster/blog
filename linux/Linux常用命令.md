# 零、Linux根目录详解：

- **/bin**：bin是Binary的缩写, 这个目录存放着最经常使用的命令。
- **/boot：** 这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。
- **/dev ：** dev是Device(设备)的缩写, 存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的方式是相同的。
- **/etc：** 这个目录用来存放所有的系统管理所需要的配置文件和子目录。
- **/home**：用户的主目录，在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。
- **/lib**：这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。
- **/lost+found**：这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。
- **/media**：linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。
- **/mnt**：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。
- ==**/opt**：这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。==
- **/proc**：这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。
- ==**/root**：该目录为系统管理员，也称作超级权限者的用户主目录。==
- **/sbin**：s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。
- **/srv**：该目录存放一些服务启动之后需要提取的数据。
- **/sys**：这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统 sysfs 。
- **/tmp**：这个目录是用来存放一些临时文件的。
- **/usr**：这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。
- ==**/usr**/local：用来存放用户自己的一些软件。==
- **/usr/bin：** 系统用户使用的应用程序。
- **/usr/sbin：** 超级用户使用的比较高级的管理程序和系统守护程序。
- **/usr/src：** 内核源代码默认的放置目录。
- **/var**：这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。
- **/run**：是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。



# 一、常用命令

### 1、系统级命令

> echo 在终端输出字符串或变量值

1. 单引号为强转义，单引号内所有的特殊字符都失效（被视为普通字符）；
2. 双引号是弱转义，内部只能出现三种特殊字符：美元符($)、反引号(`)、转义符反斜线(\\)，其余特殊字符视为普通字符。
3. 反斜线(\\),仅仅表示其后紧跟着的特殊字符失去意义
4. 反引号(``)：把其中的命令执行后返回结果

```bash
echo 'The System is \n `uname -a`'
echo "The System is `uname -a`"		等价于		echo The System is `uname -a`
echo uname -a

PRICE=10
echo "the data is $PRICE"
echo "the data is \$$PRICE"		# \让后面紧跟者的$表示美元符号，而不是特殊字符
```

> date	查看系统时间

date命令用于显示及设置系统的时间或日期，格式为“date [选项] [+指定的格式]”。

```bash
# 指定的日期格式：yyyy-mm-dd hh:MM:SS
date "+%Y-%m-%d %H:%M:%S"
```

> shutdown	关机命令

```bash
# 指定时间关机
shutdown -h time

shutdown -h now		# 立即关机

shutdown -h +10		# 10分钟后关机

shutdown –h 20:25 	# 今天20:25关机

# 指定时间重启
shutdown -r time

shutdown –r now 	# 系统立马重启，等价于reboot命令

shutdown –r +10 	# 系统十分钟后重启

# 重启命令，等价于shutdown -r now	——需要root权限
reboot

# 关机命令	——需求root权限
poweroff

# 关闭系统，等同于shutdown –h now 和 poweroff
halt 
```

> weget命令

wget命令用于在终端中下载网络文件，格式为“wget [参数]下载地址”。

> ps命令

常用的ps命令组合：**ps -ef** 和 **ps aux**

> top命令

top命令用于动态地监视进程活动与系统负载等信息，其格式为top。

> free命令

free用于显示当前系统中内存的使用量信息，格式为“free [-h]”。

> 输出重定向

![image-20210713152542496](https://raw.githubusercontent.com/ObMaster/Images/master/blog/image-20210713152542496.png)



### 2、目录管理

> 绝对路径和相对路径

我们知道Linux的目录结构为树状结构，最顶级的目录为根目录 /。

其他目录通过挂载可以将它们添加到树中，通过解除挂载可以移除它们。

在开始本教程前我们需要先知道什么是绝对路径与相对路径。

**绝对路径：**

路径的写法，由根目录 / 写起，例如：/usr/share/doc 这个目录。

**相对路径：**

路径的写法，不是由 / 写起，例如由 /usr/share/doc 要到 /usr/share/man 底下时，可以写成：cd ../man 这就是相对路径的写法啦！

> 处理目录的常用命令

接下来我们就来看几个常见的处理目录的命令吧：

- ls: 列出目录
- cd：切换目录
- pwd：显示目前的目录
- mkdir：创建一个新的目录
- rmdir：删除一个空的目录
- cp: 复制文件或目录
- rm: 移除文件或目录
- mv: 移动文件与目录，或修改文件与目录的名称

你可以使用 *man [命令]* 来查看各个命令的使用文档，如 ：man cp。

> ls （列出目录）

在Linux系统当中， ls 命令可能是最常被运行的。

语法：

```
[root@www ~]# ls [-aAdfFhilnrRSt] 目录名称
```

选项与参数：

- -a ：全部的文件，连同隐藏文件( 开头为 . 的文件) 一起列出来(常用)
- -l ：长数据串列出，包含文件的属性与权限等等数据；(常用)

---

> alias	查看、设置别名

创建命令别名，如我们常用的**ls -l**命令，大多数Linux系统都给我们设置了一个**ll**别名，因此可以直接使用**ll**命令。

```bash
# 设置别名
alias 别名='命令'

# 查看别名
alias 别名

# 取消别名
unalias 别名
```

> cd （切换目录）

cd是Change Directory的缩写，这是用来变换工作目录的命令。

`/` 	表示根目录，也就是绝对路径

`~`	 表示当前用户目录，如root用户的就是/root

> pwd ( 显示目前所在的目录 )

pwd 是 **Print Working Directory** 的缩写，也就是显示目前所在目录的命令。

```
pwd [-P]
```

选项与参数：**-P** ：显示出确实的路径，而非使用连接(link) 路径。

> touch	创建文件

touch命令用于创建空白文件或设置文件的时间，格式为“touch [选项] [文件]”。

> mkdir （创建新目录）

如果想要创建新的目录的话，那么就使用mkdir (make directory)吧。

```
mkdir [-mp] 目录名称
```

选项与参数：

- -m ：配置文件的权限喔！直接配置，不需要看默认权限 (umask) 的脸色～
- -p ：帮助你直接将所需要的目录(包含上一级目录)递归创建起来！

> rmdir ( 删除空的目录 )

语法：

```
rmdir [-p] 目录名称
```

选项与参数：**-p ：**连同上一级『空的』目录也一起删除

注意：这个 rmdir 仅能删除空的目录，你可以使用 rm 命令来删除非空目录，后面我们会将！

> cp ( 复制文件或目录 )

语法：

```
[root@www ~]# cp [-adfilprsu] 来源档(source) 目标档(destination)
[root@www ~]# cp [options] source1 source2 source3 .... directory
```

选项与参数：

- **-a：**相当於 -pdr 的意思，至於 pdr 请参考下列说明；(常用)
- **-p：**连同文件的属性一起复制过去，而非使用默认属性(备份常用)；
- **-d：**若来源档为连结档的属性(link file)，则复制连结档属性而非文件本身；
- **-r：**递归持续复制，用於目录的复制行为；(常用)
- **-f：**为强制(force)的意思，若目标文件已经存在且无法开启，则移除后再尝试一次；
- **-i：**若目标档(destination)已经存在时，在覆盖时会先询问动作的进行(常用)
- **-l：**进行硬式连结(hard link)的连结档创建，而非复制文件本身。
- **-s：**复制成为符号连结档 (symbolic link)，亦即『捷径』文件；
- **-u：**若 destination 比 source 旧才升级 destination ！

> rm ( 移除文件或目录 )

语法：

```
rm [-fir] 文件或目录
```

选项与参数：

- -f ：就是 force 的意思，忽略不存在的文件，不会出现警告信息；
- -i ：互动模式，在删除前会询问使用者是否动作
- -r ：递归删除啊！最常用在目录的删除了！这是非常危险的选项！！！

常用组合选项：

```bash
# 删除文件
rm -f filename
# 删除目录
rm -rf filename
```

> mv  ( 移动文件与目录，或修改名称 )

语法：

```
[root@www ~]# mv [-fiu] source destination
[root@www ~]# mv [options] source1 source2 source3 .... directory
```

选项与参数：

- -f ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
- -i ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！
- -u ：若目标文件已经存在，且 source 比较新，才会升级 (update)

### 3、打包压缩与搜索命令

> tar 命令

常用压缩命令：tar

```bash
# 常用压缩命令，tar_name 压缩包名称；file 被压缩文件或目录
tar -czvf tar_name file

#常用解压命令，tar_name 要解压的压缩包名称；path 指定的解压缩目录
tar -xzvf tar_name -C path
```

> grep命令

grep命令用于在文本中执行关键词搜索，并显示匹配的结果，格式为“grep [选项] [文件]”。

选项：

- -v	反向选择
- -n    显示行号

```bash
# 查找path中包含string项的数据
grep string path


# 查找出当前系统中不允许登录系统的所有用户信息
grep nologin /etc/passwd

# 查找出当前系统中允许登录系统的所有用户信息
grep nologin /etc/passwd -v
```

> find命令

find命令用于按照指定条件来查找文件，格式为“find [查找路径]寻找条件 操作”。

查找条件：

- -name	根据名称进行匹配，最常用的方式

> |	管道命令符

其执行格式为“命令A|命令B”。**把前一个命令原本要输出到屏幕的数据当作是后一个命令的标准输入**

```	bash
# 如查询系统中redis进程
ps -ef | grep redis
```

### 4、硬链接软连接

Linux 链接分两种，一种被称为硬链接（Hard Link），另一种被称为符号链接（Symbolic Link）。

**硬连接**

`ln 硬连接名称` 

硬连接指通过索132.90.184.16:1313引节点来进行连接。在 Linux 的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号(Inode Index)。在 Linux 中，多个文件名指向同一索引节点是存在的。比如：A 是 B 的硬链接（A 和 B 都是文件名），则 A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号相同，即一个 inode 节点对应两个不同的文件名，两个文件名指向同一个文件，A 和 B 对文件系统来说是完全平等的。删除其中任何一个都不会影响另外一个的访问。

可以**通过硬链接实现关键文件的备份**，当原文件发生变化后，其硬链接文件也会同步发生变化，原文件被删除后，硬链接文件任然还在

**软连接**

`ln -s 软连接名称` 

另外一种连接称之为符号连接（Symbolic Link），也叫软连接。软链接文件有类似于 Windows 的快捷方式。它实际上是一个特殊的文件。在符号连接中，文件实际上是一个文本文件，其中包含的有另一文件的位置信息。比如：A 是 B 的软链接（A 和 B 都是文件名），A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号不相同，A 和 B 指向的是两个不同的 inode，继而指向两块不同的数据块。但是 A 的数据块中存放的只是 B 的路径名（可以根据这个找到 B 的目录项）。A 和 B 之间是“主从”关系，如果 B 被删除了，A 仍然存在（因为两个是不同的文件），但指向的是一个无效的链接。



# 五、用户权限

> 概念

一个Linux可以有多个用户，每个用户对应一个权限，当多个用户拥有一样的权限时，一个一个设置权限太慢太麻烦，，因此出现了组的概念，一个组可以有零个或多个用户，一个用户也可以属于多个组

```bash
# 1、查看用户所属组信息
groups user
# 2、查看所有拥有sudo权限的用户
getent group sudo
```

> 用户账户管理

可通过` cat /etc/passwd`查看用户信息

**添加用户：useradd 选项 username**		

- 选项：
  - -c	comment，指定一段描述信息
  - -d    指定用户主目录，默认为/home/username。当指定的用户主目录不存在时，部分系统会自动创建，有的系统不会自动创建，这就需要配合-m参数来创建，或者自己手动创建即可
  - -g    指定用户所属用户组，默认会创建一个与用户名相同的用户组
  - -m    若使用者目录不存在则自动建立
  - -u    指定用户号，默认从1000开始，往上加，如root用户的用户号为0

**删除用户：userdel 选项 username**       -r 同时删除用户主目录

**修改用户：usermod 选项 username**	这里的选项与添加用户一样，意义也相同

**切换用户**：

￥表示普通用户

#表示超级用户





> 用户口令的管理

用户管理的一项重要内容是用户口令的管理。用户账号刚创建时没有口令，但是被系统锁定，无法使用，必须为其指定口令后才可以使用，即使是指定空口令。

指定和修改用户口令的Shell命令是passwd。超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。

命令的格式为：

```
passwd 选项 用户名
```

可使用的选项：

- -l 锁定口令，即禁用账号。
- -u 口令解锁。
- -d 使账号无口令。
- -f 强迫用户下次登录时修改口令。

如果默认用户名，则修改当前用户的口令。

先询问原口令，验证后再要求用户输入两遍新口令，如果两次输入的口令一致，则将这个口令指定给用户；而**超级用户为用户指定口令时，就不需要知道原口令**。

> su命令和sudo服务

**su命令可以解决切换用户身份的需求，使得当前用户在不退出登录的情况下，切换到其他用户**，比如从root管理员切换至普通用户：

```bash
# 直接切换到user用户下，但是系统信息没变，任然时root用户的
su user
# 完全切换到user用户下，包括环境变量等系统信息
su - user
```

**sudo命令用于给普通用户提供额外的权限来完成原本root管理员才能完成的任务**，格式为“sudo [参数]命令名称”。

### 磁盘管理

> 概述

Linux磁盘管理好坏直接关系到整个系统的性能问题。

Linux磁盘管理常用命令为 df、du。

- df ：列出文件系统的整体磁盘使用量
- du：检查磁盘空间使用量

> df

df命令参数功能：检查文件系统的磁盘空间占用情况。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息。

语法：

```
df [-ahikHTm] [目录或文件名]
```

选项与参数：

- -a ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；
- -k ：以 KBytes 的容量显示各文件系统；
- -m ：以 MBytes 的容量显示各文件系统；
- -h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；
- -H ：以 M=1000K 取代 M=1024K 的进位方式；
- -T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；
- -i ：不用硬盘容量，而以 inode 的数量来显示

> du

Linux du命令也是查看使用空间的，但是与df命令不同的是Linux du命令是对文件和目录磁盘使用的空间的查看，还是和df命令有一些区别的，这里介绍Linux du命令。

语法：

```
du [-ahskm] 文件或目录名称
```

选项与参数：

- -a ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。
- -h ：以人们较易读的容量格式 (G/M) 显示；
- -s ：列出总量而已，而不列出每个各别的目录占用容量；
- -S ：不包括子目录下的总计，与 -s 有点差别。
- -k ：以 KBytes 列出容量显示；
- -m ：以 MBytes 列出容量显示；

与 df 不一样的是，du 这个命令其实会直接到文件系统内去搜寻所有的文件数据。

> 磁盘挂载与卸除

根文件系统之外的其他文件要想能够被访问，都必须通过“关联”至根文件系统上的某个目录来实现，此关联操作即为“挂载”，此目录即为“挂载点”,解除此关联关系的过程称之为“卸载”

Linux 的磁盘挂载使用mount命令，卸载使用umount命令。

磁盘挂载语法：

```
mount [-t 文件系统] [-L Label名] [-o 额外选项] [-n] 装置文件名 挂载点
```

测试：

```
# 将 /dev/hdc6 挂载到 /mnt/hdc6 上面！
[root@www ~]# mkdir /mnt/hdc6
[root@www ~]# mount /dev/hdc6 /mnt/hdc6
[root@www ~]# df
Filesystem           1K-blocks     Used Available Use% Mounted on
/dev/hdc6              1976312     42072   1833836   3% /mnt/hdc6
```

磁盘卸载命令 umount 语法：

```
umount [-fn] 装置文件名或挂载点
```

选项与参数：

- -f ：强制卸除！可用在类似网络文件系统 (NFS) 无法读取到的情况下；
- -n ：不升级 /etc/mtab 情况下卸除。

卸载/dev/hdc6

```
[root@www ~]# umount /dev/hdc6
```











